document.addEventListener("DOMContentLoaded",function(){$(".bottom-menu-item").on("click",function(){$(".bottom-menu-item").removeClass("bottom-menu-item-active"),$(this).toggleClass("bottom-menu-item-active")}),$("#button-submit-setting-change").on("click",function(){$("#old-password-input-error").css("display","none"),$("#new-password-input-error").css("display","none"),$("#new-confirm-password-input-error").css("display","none");var e=$("#old-password").val();if(e.length<8)$("#old-password-input-error").css("display","unset").text("invalid old password");else{var s=$("#new-password").val();if(s.length<8)$("#new-password-input-error").css("display","unset").text("invalid new password");else{var o=$("#confirm-password").val();if(o.length<8)$("#new-confirm-password-input-error").css("display","unset").text("invalid confirm password");else if(s===o)if(s.toLowerCase()!==e.toLowerCase()){var n=JSON.stringify({old_password:e,new_password:s,confirm_password:o}),t=new XMLHttpRequest;t.ontimeout=function(){alert("check your connection and try again")},t.onerror=function(){alert("unexpected error, please try again")},t.onload=function(){if(4===t.readyState){var e=t.responseText;if(e.includes("status")){var s=JSON.parse(e);if(s.status)window.location="http://localhost/ExchangeWebsite/backend/login.php";else{var o=s.error;o.includes("old password is")?$("#old-password-input-error").css("display","unset").text(o):o.includes("new password cannot be")?$("#new-password-input-error").css("display","unset").text("new password shouldnot be same as oldone"):"auth required"===o?window.location="http://localhost/ExchangeWebsite/backend/login.php":alert(o)}}else alert("unexpected error, please try again")}},t.open("POS","http://localhost/ExchangeWebsite/backend/tools.php?command=change_password",!0),t.setRequestHeader("Content-Type","application/json"),t.send(n)}else $("#new-password-input-error").css("display","unset").text("new password shouldnot be same as oldone");else $("#new-confirm-password-input-error").css("display","unset").text("confirm password should be same as new")}}})});